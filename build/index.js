(()=>{var e={346:(e,t,s)=>{const n=s(185),r=s(37),i=s(644);s(13).ObjectID;const a=n.Schema({cloudProductId:String,title:String,subtitle:String,category:String,genders:[String],currentPrice:Number,fullPrice:Number,priceId:String,colorways:[{colorDescription:String,images:Object}],skuData:[Object],images:Object,isOnSale:Boolean,active:Boolean,deleted:Boolean,keyClient:String});a.plugin(r),a.plugin(i),e.exports=n.model("Product",a)},997:(e,t,s)=>{const n=s(860).Router(),r=s(346);function i(e){let t=[{$or:[{title:{$regex:e.search,$options:"i"}},{subtitle:{$regex:e.search,$options:"i"}}]}],s={currentPrice:{$gt:e.filter.price[0],$lt:e.filter.price[1]}};return t.push(s),e.filter.kids.length>0?t.push({genders:{$in:e.filter.kids}}):(e.filter.gender.includes("MEN")&&t.push({genders:{$in:["MEN"]}}),e.filter.gender.includes("WOMEN")&&t.push({genders:{$in:["WOMEN"]}}),e.filter.gender.includes("UNISEX")&&t.push({$or:[{$and:[{genders:"MEN"},{genders:"WOMEN"}]},{$and:[{genders:"BOYS"},{genders:"GIRLS"}]}]})),e.filter.category.length>0&&t.push({category:{$in:e.filter.category}}),e.filter.onSale&&e.filter.onSale.length>0&&t.push({isOnSale:!0}),{$and:t}}s(13).ObjectID,n.post("/getProduct",(async(e,t)=>{let s={...e.body};r.find({cloudProductId:s.cloudProductId},((e,n)=>{let a=null;n.length>0&&(a=n[0]);let o=i(s);r.findRandom(o,{},{limit:12},((e,s)=>{let n=[];n=s.filter((e=>e.cloudProductId!==a.cloudProductId)),n.length<12?r.findRandom({},{},{limit:13-n.length},((e,s)=>{let r=[];e?t.send({status:"OK",item:a,recomendations:[]}):(r=s.filter((e=>e.cloudProductId!==a.cloudProductId)),t.send({status:"OK",item:a,recomendations:[...n,...r]}))})):t.send({status:"OK",item:a,recomendations:n})}))}))})),n.post("/",(async(e,t)=>{let s={...e.body},n=a(s,24),o=i(s);r.paginate(o,n,((e,s)=>{let n=[];s.docs.forEach((e=>n.push(e))),t.send({status:"OK",items:n,totalPages:s.totalPages})}))}));const a=(e,t)=>({page:e.filter.page?e.filter.page:1,limit:t,sort:e.sort?e.sort:{},projection:{_id:1,cloudProductId:1,title:1,subtitle:1,category:1,genders:1,currentPrice:1,fullPrice:1,priceId:1,colorways:1,skuData:1,images:1,isOnSale:1,active:1,deleted:1}});e.exports=n},829:e=>{e.exports=Object.freeze({PAGE_LIMIT:10})},408:e=>{e.exports=Object.freeze({USER_NO_ACTIVE:"USER_NO_ACTIVE",PROFILE_NO_ACTIVE:"PROFILE_NO_ACTIVE",CLIENT_NO_ACTIVE:"CLIENT_NO_ACTIVE",ERROR_NO_UPDATED:"ERROR_NO_UPDATED",UNEXPECTED_ERROR:"UNEXPECTED_ERROR",SESSION_EXPIRED:"SESSION_EXPIRED",WRONG_DATA:"WRONG_DATA",ERROR_FORM:"ERROR_FORM"})},942:e=>{e.exports=Object.freeze({ENGLISH:"en",SPANISH:"es"})},95:(e,t,s)=>{const{assign:n}=s(517);e.exports=(e,t)=>n({},{...e._doc,password:void 0,deleted:void 0,keyClient:!0===t?e._doc.keyClient:void 0,__v:void 0})},183:(e,t,s)=>{const{PAGE_LIMIT:n}=s(829),r=s(262),i=s(147),a=s(95);e.exports=async(e,t,s,o={})=>{try{const l=await r.getClass(t),d=await i.findOne({key:t}),c=-1!==o.page?{limit:n,...o}:{},u=await l.paginate(s,c);let p=u.docs.map((e=>a(e)));if("modules"===t){let e=d.fields.filter((e=>"visibleTable"in e&&e.visibleTable)),t=e.map((e=>e.key));p=u.docs.map((s=>((e,t,s=[])=>{const{password:n,__v:r,keyClient:i,deleted:a,...o}=e.toObject();return Object.keys(o).filter((e=>s.includes(e))).forEach((e=>{const s=t.find((t=>t.key===e));"autocomplete"===s?.typew&&!0!==s?.isMultiple&&(o[`${e}_label`]=s.values[o[e]])})),o})(s,e,t)))}e.send({status:"OK",items:p,totalPages:u.totalPages,totalItems:u.totalDocs})}catch(t){e.status(500).send({error:"Internal server error"})}}},262:(e,t,s)=>{const n=s(827),r=s(358),i=s(477),a=s(147),o=s(346),{ObjectId:l}=s(13);t.getClass=e=>{switch(e){case"profiles":return n;case"users":return r;case"clients":return i;case"modules":return a;case"products":return o;default:return null}},t.getNewItem=(e,t,s="")=>{let i=null;switch(e){case"profiles":return i=new n({name:t.name,active:void 0===t.active||t.active,keyClient:s,deleted:!1}),i;case"users":return i=new r({username:t.username,profile:t.profile?l(t.profile):null,name:t.name,lastname:t.lastname,email:t.email,password:t?.password??void 0,active:void 0===t.active||t.active,keyClient:s,deleted:!1}),i;case"modules":return i=new a({key:t.key,name_en:t.name_en,name_es:t.name_es,mainFunction:t.mainFunction,icon:t.icon,keyClient:s,deleted:!1}),i;case"products":return i=new o({...t,keyClient:s,active:void 0===t.active||t.active,deleted:!1}),i;default:return null}}},923:e=>{e.exports=e=>{const t={},s=e.map((e=>{if(!e.value)return{};switch(e.operator){case"equals":case"=":return{[e.column]:e.value};case">":return{[e.column]:{$gt:e.value}};case">=":return{[e.column]:{$gte:e.value}};case"<":return{[e.column]:{$lt:e.value}};case"<=":return{[e.column]:{$lte:e.value}};case"!=":return{[e.column]:{$ne:e.value}};case"isEmpty":return{[e.column]:{$in:[null,""]}};case"isNotEmpty":return{[e.column]:{$exists:!0,$ne:""}};case"startsWith":return{[e.column]:{$regex:`^${e.value}`,$options:"i"}};case"endsWith":return{[e.column]:{$regex:`${e.value}$`,$options:"i"}};case"contains":return{[e.column]:{$regex:e.value,$options:"i"}};case"true":return{[e.column]:!0};case"false":return{[e.column]:!1};default:return{}}}));return s.length>0&&(t.$and=s),t}},477:(e,t,s)=>{const n=s(185),r=s(37),i=s(644);var a=s(13).ObjectID;const o=n.Schema({name:String,key:String,logoUrl:String,userAdmin:a,profileAdmin:a,modules:[String],theme:{palette:{primary:{main:String,dark:String,light:String,contrastText:String},secondary:{main:String,dark:String,light:String,contrastText:String}}},active:Boolean,keyClient:String,deleted:Boolean});o.plugin(r),o.plugin(i),e.exports=n.model("Client",o)},147:(e,t,s)=>{const n=s(185),r=s(37),i=s(644),a=s(942);s(13).ObjectID;const o=n.Schema({key:String,name_en:String,name_es:String,icon:String,mainFunction:String,options:[{key:String,title:{[a.ENGLISH]:String,[a.SPANISH]:String},url:String}],fields:[{key:String,name:{[a.ENGLISH]:String,[a.SPANISH]:String},typew:String,module:String,defaultValue:String,urlValues:{type:String,required:!1},values:{type:Object,required:!1},minValue:{type:Number,required:!1},maxValue:{type:Number,required:!1},isMultiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:[String],required:!1},visible:{type:[String],required:!1},validations:{type:[String],required:!1},filterable:{type:Boolean,required:!1}}],active:Boolean,keyClient:String,deleted:Boolean});o.plugin(r),o.plugin(i),e.exports=n.model("Module",o)},827:(e,t,s)=>{const n=s(185),r=s(37),i=s(644);s(13).ObjectID;const a=n.Schema({name:String,profiles:[String],permissions:[{keyModule:String,options:[String]}],active:Boolean,keyClient:String,deleted:Boolean});a.plugin(r),a.plugin(i),e.exports=n.model("Profile",a)},358:(e,t,s)=>{const n=s(185),r=s(37),i=s(644);var a=s(13).ObjectID;const o=n.Schema({username:String,password:String,profile:a,name:String,lastname:String,email:String,active:Boolean,keyClient:String,deleted:Boolean});o.plugin(r),o.plugin(i),e.exports=n.model("User",o)},710:(e,t,s)=>{const n=s(860).Router(),r=s(490),i=s(827),a=s(477),o=s(147),l=s(358),d=s(17),c=s(32),u=s(95),p=s(408);function m(e){let t={};return e.forEach((e=>{t[e.keyModule]=e.options})),t}n.post("/loadConfig",(async(e,t)=>{const s=e.session.user,{keyClient:n}=s;let r=[];try{const e=await a.findOne({key:n,deleted:!1});if(!e)return t.status(400).send({status:p.UNEXPECTED_ERROR});{let n="theme"in e&&"palette"in e.theme&&"primary"in e.theme.palette&&"main"in e.theme.palette.primary&&e.theme.palette.primary.main?e.theme:null;(await o.find({key:{$in:e.modules},deleted:!1})).forEach((e=>r.push(function(e){let t=e.toObject();return delete t._id,t}(e))));const a=await i.findById(s.profile);if(!a)return t.status(400).send({status:p.UNEXPECTED_ERROR});t.send({status:"OK",user:s,modules:r,admin:{user:e.userAdmin,profile:e.profileAdmin},permissions:m(a.permissions),name:e.name,logo:e.logoUrl,theme:n})}}catch(e){t.status(500).send({status:p.UNEXPECTED_ERROR})}})),n.post("/login",(async(e,t)=>{let s={...e.body,username:e.body.username?e.body.username.toLowerCase():""};const{error:n,value:o}=d.loginValidation(e.body);if(n)return t.status(400).send({status:"ERROR",errors:c(n.details)});try{const n=await l.findOne({username:s.username,password:r(s.password),deleted:!1});if(n){if(!n.active)return t.status(400).send({status:p.USER_NO_ACTIVE});const s=await i.findById(n.profile);if(!s)return t.status(400).send({status:p.UNEXPECTED_ERROR});if(!s.active)return t.status(400).send({status:p.PROFILE_NO_ACTIVE});const r=await a.findOne({key:n.keyClient});if(!r)return t.status(400).send({status:p.UNEXPECTED_ERROR});if(!r.active)return t.status(400).send({status:p.CLIENT_NO_ACTIVE});let o=u(n,!0);e.session.user=o,e.session.save(),t.send({status:"OK",data:o})}else t.status(400).send({status:"ERROR",errors:{password:{error:!0,keyHelperText:p.WRONG_DATA}}})}catch(n){t.status(400).send({status:"ERROR",errors:{password:{error:!0,keyHelperText:p.UNEXPECTED_ERROR}}})}})),n.post("/logout",(async(e,t)=>{let s=e.session;s&&s.user&&delete s.user,t.send({status:"OK"})})),e.exports=n},479:(e,t,s)=>{const n=s(860).Router(),r=s(185),i=s(490),a=s(147),o=s(358),l=s(477),d=s(827),c=s(95),u=s(976),p=s(32),m=s(408);n.post("/getAllModules",(async(e,t)=>{try{const e=(await a.find({})).map(c);t.send({status:"OK",modules:e})}catch(e){console.error(e),t.status(500).send({status:m.UNEXPECTED_ERROR})}})),n.post("/assignModules",(async(e,t)=>{const{id:s,modules:n}=e.body,{keyClient:r}=e.session.user;try{const e=await l.findOneAndUpdate({_id:s,keyClient:r,deleted:!1},{modules:n},{new:!0}),i=await a.find({key:{$in:n}}),o=g(i);await d.findByIdAndUpdate(e.profileAdmin,{permissions:o},{new:!0}).exec()?t.send({status:"OK"}):t.status(400).send({status:m.ERROR_NO_UPDATED})}catch(e){console.error(e),t.status(500).send({status:m.UNEXPECTED_ERROR})}})),n.post("/new",(async(e,t)=>{const{error:s,value:n}=u.newClientValidation(e.body);if(s)return t.status(400).send({status:m.ERROR_FORM,errors:p(s.details)});const c=e.session.user,{name_profile:y,key:E,username:O,name_user:R,lastname:f,email:_,password:h,module:w}=e.body,C=await r.startSession();try{await C.withTransaction((async()=>{const s=["dashboard","users","profiles"],n=await a.find({key:{$in:s}}),r=g(n),u=new d({name:y,keyClient:E,permissions:r,active:!0,deleted:!1}),p=await u.save({session:C}),m=new o({username:O.toLowerCase(),profile:p._id,name:R,lastname:f,email:_,password:i(O.toLowerCase()),keyClient:E,active:!0,deleted:!1}),h=await m.save({session:C}),w=new l({name:e.body.name,key:E,profileAdmin:p._id,userAdmin:h._id,user:p._id,modules:s,keyClient:c.keyClient,active:!0,deleted:!1});await w.save({session:C}),t.send({status:"OK"})}))}catch(s){console.error(s),t.status(500).send({status:m.UNEXPECTED_ERROR})}finally{C.endSession()}}));const g=e=>e.reduce(((e,t)=>{const s=t.options.map((e=>e.key));return e.push({keyModule:t.key,options:s}),e}),[]);e.exports=n},34:(e,t,s)=>{const n=s(860).Router();var r=s(13).ObjectID;const i=s(262),a=s(183),o=s(923),l=(s(827),s(147)),d=s(408);n.post("/getItems",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n,page:r=1,pageSize:i,sorting:l,filtering:d}=e.body,c={deleted:!1,keyClient:s,...d?{...o(d)}:{}},u=l?.reduce(((e,t)=>(e[t.field]="desc"===t.sort?-1:1,e)),{}),p={page:r,...i?{limit:i}:{},...u?{sort:u}:{}};a(t,n,c,p)})),n.post("/new",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n}=e.body;try{let r={...e.body};i.getNewItem(n,r,s).save().then((()=>t.send({status:"OK"})))}catch(e){t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/edit",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n,id:r}=e.body;try{let a=i.getClass(n),o={...e.body};delete o.id,delete o.module,await a.findOneAndUpdate({_id:r,keyClient:s,deleted:!1},o,{new:!0}).exec()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})}catch(e){t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/delete",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n,id:r}=e.body;try{let e=i.getClass(n);await e.findOneAndUpdate({_id:r,keyClient:s,deleted:!1},{deleted:!0},{new:!0}).exec()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_DELETED})}catch(e){t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/toggleActive",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n,id:r,active:a}=e.body;try{let e=i.getClass(n);await e.findOneAndUpdate({_id:r,keyClient:s,deleted:!1},{active:a},{new:!0}).exec()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})}catch(e){t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/getItemsActivesBySelect",(async(e,t)=>{const{keyClient:s}=e.session.user,{module:n}=e.body,r={deleted:!1,active:!0,keyClient:s};i.getClass(n).find(r,((e,s)=>{const n=s.reduce(((e,{_id:t,name:s})=>({...e,[t]:s})),{});t.send({status:"OK",items:n})}))})),n.post("/checkUnique",(async(e,t)=>{let s=e.session.user,n={...e.body},r={deleted:!1,keyClient:s.keyClient};"clients"==n.module&&"key"==n.nameInput&&delete r.keyClient;let a=i.getClass(n.module);r[n.nameInput]=n.value,a.find(r,((e,s)=>{s.length>1?t.send({status:"OK",error:"DUPLICATE"}):0==s.length||(n.isAnObjectId&&null!==n.exception?String(s[0][n.nameInput]):s[0][n.nameInput])===n.exception&&null!==n.exception?t.send({status:"OK",error:"NONE"}):t.send({status:"OK",error:"DUPLICATE"})}))})),n.post("/checkUniqueGlobal",(async(e,t)=>{e.session.user;let s={...e.body},n={deleted:!1},r=i.getClass(s.module);n[s.nameInput]=s.value,r.find(n,((e,n)=>{n.length>1?t.send({status:"OK",error:"DUPLICATE"}):0==n.length||(s.isAnObjectId&&null!==s.exception?String(n[0][s.nameInput]):n[0][s.nameInput])===s.exception&&null!==s.exception?t.send({status:"OK",error:"NONE"}):t.send({status:"OK",error:"DUPLICATE"})}))})),n.post("/editFields",(async(e,t)=>{const{value:s,id:n}=e.body,{keyClient:i}=e.session.user;await l.findOneAndUpdate({keyClient:i,_id:r(n)},{fields:JSON.parse(s)},{new:!0}).lean()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})})),n.post("/editOptions",(async(e,t)=>{const{value:s,id:n}=e.body,{keyClient:i}=e.session.user;await l.findOneAndUpdate({keyClient:i,_id:r(n)},{options:JSON.parse(s)},{new:!0}).lean()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})})),e.exports=n},686:(e,t,s)=>{const n=s(860).Router(),{assign:r}=s(517),i=s(13).ObjectID,a=s(827),o=(s(358),s(147)),l=s(477),d=s(408);n.post("/getProfiles",(async(e,t)=>{try{const{keyClient:s}=e.session.user,n={keyClient:s,active:!0,deleted:!1},r=await a.find(n).lean();t.send({status:"OK",elements:r})}catch(e){console.error(e),t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/loadModulesByProfile",(async(e,t)=>{const{id:s}=e.body,{keyClient:n}=e.session.user,r=await a.findById(s).lean(),i=await l.findOne({key:r.keyClient,deleted:!1,active:!0}).lean();if(i){const e=await o.find({key:{$in:i.modules},deleted:!1}).lean();t.send({status:"OK",elements:e})}else t.send({status:"OK",elements:[]})})),n.post("/assignProfile",(async(e,t)=>{try{const{id:s,profiles:n}=e.body,{keyClient:r}=e.session.user;await a.findOneAndUpdate({...initFilter,_id:i(s)},{profiles:n},{new:!0}).lean()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})}catch(e){console.error(e),t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/editPermissions",(async(e,t)=>{try{const{id:s,permissions:n}=e.body,{keyClient:r}=e.session.user;await a.findOneAndUpdate({...initFilter,_id:i(s)},{permissions:n},{new:!0}).lean()?t.send({status:"OK"}):t.status(400).send({status:d.ERROR_NO_UPDATED})}catch(e){console.error(e),t.status(500).send({status:d.UNEXPECTED_ERROR})}})),n.post("/getProfilesActivesBySelect",(async(e,t)=>{try{const{keyClient:s,profile:n}=e.session.user,i={keyClient:s,deleted:!1,active:!0},o=await a.findById(n).lean(),l=(await a.find({_id:{$in:o.profiles},...i}).lean()).reduce(((e,t)=>r(e,{[t._id]:t.name})),{});t.send({status:"OK",items:l})}catch(e){console.error(e),t.status(500).send({status:d.UNEXPECTED_ERROR})}})),e.exports=n},295:(e,t,s)=>{const n=s(860).Router(),r=s(490),i=s(358),a=s(408);n.post("/assignPassword",(async(e,t)=>{try{const{id:s,password:n}=e.body,{keyClient:o}=e.session.user;await i.findByIdAndUpdate(s,{password:r(n)},{new:!0}).lean()?t.send({status:"OK"}):t.status(400).send({status:a.ERROR_NO_UPDATED})}catch(e){t.status(500).send({status:a.UNEXPECTED_ERROR})}})),n.post("/updatePassword",(async(e,t)=>{try{const{id:s,current_password:n,new_password:o}=e.body,{username:l,keyClient:d}=e.session.user;await i.findOne({_id:s,username:l,password:r(n)}).lean()?(await i.findByIdAndUpdate(s,{password:r(o)},{new:!0}).lean(),t.send({status:"OK"})):t.status(400).send({status:a.ERROR_FORM,errors:{current_password:{error:!0,keyHelperText:"WRONG_DATA"}}})}catch(e){t.status(500).send({status:a.UNEXPECTED_ERROR})}})),e.exports=n},17:(e,t,s)=>{const n=s(506);t.loginValidation=e=>n.object({username:n.string().required(),password:n.string().required()}).validate(e,{allowUnknown:!0,abortEarly:!1})},976:(e,t,s)=>{const n=s(506);t.newClientValidation=e=>n.object({name:n.string().required(),key:n.string().required(),name_profile:n.string().required(),name_user:n.string().required(),email:n.string().email().required(),username:n.string().required()}).validate(e,{allowUnknown:!0,abortEarly:!1})},32:e=>{e.exports=e=>{const t={};return e.forEach((e=>{const s=e.context.key;let n=-1===e.type.indexOf(".")?e.type:e.type.split(".")[1];t[s]||"unknown"===n||(t[s]={error:!0,keyHelperText:n},"min"!==n&&"max"!==n||(t[s]={...t[s],limit:e.context.limit}))})),t}},679:(e,t,s)=>{const n=s(185),r=s(37),i=s(644),a=n.Schema({name:String,lvl:Number,score:Number});a.plugin(r),a.plugin(i),e.exports=n.model("Rank",a)},528:(e,t,s)=>{const n=s(860).Router(),r=s(679);n.get("/getRanking",(async(e,t)=>{r.paginate({},{page:1,limit:10,sort:{score:-1}},(function(e,s){let n=[];s.docs.forEach((e=>n.push(e.toObject()))),t.send({status:"OK",items:n})}))})),n.post("/new",(async(e,t)=>{let s={...e.body},n={name:s.name,lvl:s.lvl,score:s.score};new r(n).save().then((()=>t.send({status:"OK",item:n})))})),e.exports=n},592:(e,t,s)=>{s(142).config(),e.exports={CONNECTION:process.env.MONGODB_CONNECTION,ALLOWED_ORIGINS:[process.env.ORIGIN_0,process.env.ORIGIN_1,process.env.ORIGIN_2,process.env.ORIGIN_3,process.env.ORIGIN_4,process.env.ORIGIN_5]}},468:e=>{e.exports=(e,s)=>t.replace(/{NAME_APP}/g,e.name).replace(/{URL_LOGO_APP}/g,e.logo).replace(/{NAME}/g,s.name).replace(/{PHONE}/g,s.phone).replace(/{EMAIL}/g,s.email).replace(/{MESSAGE}/g,s.message).replace(/{CURRENT_YEAR}/g,(new Date).getFullYear());const t='\n  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n  <html xmlns="http://www.w3.org/1999/xhtml">\n  \n  <head>\n      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n      <title>{NAME_APP}</title>\n      <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n  </head>\n  \n  <body style="margin: 0; padding: 0">\n      <table border="0" cellpadding="0" cellspacing="0" width="100%">\n          <tr>\n              <td style="padding: 10px 0 30px 0">\n                  <table align="center" border="0" cellpadding="0" cellspacing="0" width="700"\n                      style="border: 1px solid #cccccc; border-collapse: collapse">\n                      <tr>\n                          <td width="100%" align="center" bgcolor="#e2e2e2"\n                              style="padding: 10px 0 10px 0; color: #fff; font-size: 28px; font-weight: bold; font-family: Arial, sans-serif">\n                              <img src="{URL_LOGO_APP}" alt="{NAME_APP}" width="300" />\n                          </td>\n                      </tr>\n                      <tr>\n                          <td bgcolor="#ffffff" style="padding: 40px 30px 0 30px" colspan="2">\n                              <table border="0" cellpadding="0" cellspacing="0" width="100%">\n                                  <tr>\n                                      <td style="color: #153643; font-family: Arial, sans-serif; font-size: 24px">\n                                          <b>{NAME}</b>\n                                      </td>\n                                  </tr>\n                                  <tr>\n                                      <td\n                                          style="padding: 20px 0 0 0; color: #153643; font-family: Arial, sans-serif; font-size: 16px; line-height: 20px">\n                                          {MESSAGE}\n                                      </td>\n                                  </tr>\n                                  <tr>\n                                      <td style="color: #153643; font-family: Arial, sans-serif;">\n                                          <table style="margin:0 0 30px 0;">\n                                              <tr>\n                                                  <th style="padding: 20px 0 10px 0;">Contact information</th>\n                                              </tr>\n                                              <tr>\n                                                  <td>Name</td>\n                                                  <td>{NAME}</td>\n                                              </tr>\n                                              <tr>\n                                                  <td>Phone</td>\n                                                  <td>{PHONE}</td>\n                                              </tr>\n                                              <tr>\n                                                  <td>Email</td>\n                                                  <td>{EMAIL}</td>\n                                              </tr>\n                                          </table>\n                                      </td>\n                                  </tr>\n                              </table>\n                          </td>\n                      </tr>\n                      <tr>\n                          <td bgcolor="#e2e2e2" style="padding: 10px 10px 10px 10px" colspan="2">\n                              <table border="0" cellpadding="0" cellspacing="0" width="100%">\n                                  <tr>\n                                      <td style="color: #fff; font-family: Arial, sans-serif; font-size: 12px" width="75%">\n                                          Copyright &copy; 2021 - {CURRENT_YEAR}, {NAME_APP}. All rights reserved.<br />\n                                      </td>\n                                  </tr>\n                              </table>\n                          </td>\n                      </tr>\n                  </table>\n              </td>\n          </tr>\n      </table>\n  </body>\n  \n  </html>'},717:(e,t,s)=>{const n=s(184),r=s(468);e.exports=async(e,t)=>n.createTransport(e.emailSender).sendMail({from:`${e.name} <${e.emailSender.auth.user}>`,to:"yamildiego@gmail.com",subject:`Email from ${t.email}`,html:r(e,t)})},982:(e,t,s)=>{const n=s(860).Router(),r=s(717),i=[{emailSender:{service:"gmail",port:465,secure:!0,auth:{user:process.env.EMAIL,pass:process.env.PASSWORD}},name:"VerdeAgostini",logo:"https://i.ibb.co/cvR5C5F/newlogox500-en-fw.png"},{emailSender:{service:"gmail",port:465,secure:!0,auth:{user:process.env.EMAIL,pass:process.env.PASSWORD}},name:"TEDxVILLALAANGOSTURA",logo:"https://i.ibb.co/M2hWsbC/SNAG-0015.png"}];n.get("/",(async(e,t)=>{t.send({status:"OK 35"})})),n.post("/contact",(async(e,t)=>{let s={...e.body},n={name:s.name,phone:s.phone,email:s.email,message:s.message};r(i[s.website],n).then((()=>{t.send({status:"OK"})}))})),n.post("/create-checkout-session",(async(e,t)=>{let s={...e.body},n=s.items;new Order({...s}).save().then((e=>{s.freeShipping||n.push({price:config.SHIPPING_PRICE,quantity:1}),stripe.checkout.sessions.create({line_items:n,mode:"payment",success_url:`${config.DOMAIN}/success`,cancel_url:`${config.DOMAIN}/canceled`}).then(((s,n)=>{t.send({status:"OK",url:s.url,orderNumber:e._id})}),((e,s)=>{t.send({status:"ERROR"})}))}))})),e.exports=n},986:e=>{"use strict";e.exports=require("body-parser")},582:e=>{"use strict";e.exports=require("cors")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},508:e=>{"use strict";e.exports=require("express-session")},506:e=>{"use strict";e.exports=require("joi")},517:e=>{"use strict";e.exports=require("lodash")},490:e=>{"use strict";e.exports=require("md5")},13:e=>{"use strict";e.exports=require("mongodb")},185:e=>{"use strict";e.exports=require("mongoose")},37:e=>{"use strict";e.exports=require("mongoose-paginate-v2")},644:e=>{"use strict";e.exports=require("mongoose-simple-random")},184:e=>{"use strict";e.exports=require("nodemailer")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}(()=>{const e=s(860),t=s(508),n=s(986),r=(s(582),s(982)),i=s(185),a=s(710),o=s(479),l=s(34),d=s(686),c=s(295),u=s(528),p=s(997),m=s(592);i.set("strictQuery",!1),i.connect(m.CONNECTION,{useNewUrlParser:!0}).then((()=>{const s=e();s.use(e.json()),s.use(t({secret:"8JyLd{C7fk]JFSS",saveUninitialized:!0,resave:!0})),s.use(n.json()),s.use(n.urlencoded({extended:!0})),s.use(((e,t,s)=>{const n=e.headers.origin;m.ALLOWED_ORIGINS.includes(n)&&t.setHeader("Access-Control-Allow-Origin",n),t.header("Access-Control-Allow-Headers","Origin, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, X-Response-Time, X-PINGOTHER, X-CSRF-Token,Authorization"),t.header("Access-Control-Allow-Methods","GET, POST, PUT ,DELETE"),t.header("Access-Control-Allow-Credentials",!0),s()})),s.use("/",r),s.use("/products",p),s.use("/api",a),s.use("/client",o),s.use("/module",l),s.use("/profile",d),s.use("/user",c),s.use("/rank",u);const i=process.env.port||5e3;s.listen(i,(()=>{console.log(`Server has started! ${i}`)}))}))})()})();